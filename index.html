<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Retro System Interface</title>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

        body {
            font-family: 'Press Start 2P', cursive;
            background-color: #000;
            color: #00FF00;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            text-align: center;
            overflow-y: auto;
            background-image: url('home.png');
            background-size: cover;
            background-position: center;
            position: relative;
        }

        .container {
            width: 70%;
            max-width: 450px;
            padding: 20px;
            border: 5px solid #FF0000;
            margin-top: 30px;
            box-shadow: 0 0 20px 5px rgba(255, 0, 0, 0.7);
            background-color: rgba(17, 17, 17, 0.7);
            position: relative;
            z-index: 1;
            border-radius: 15px;
            margin-bottom: 50px;
            transition: background-color 0.5s;
        }

        .face img {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            margin-bottom: 20px;
            border: 4px solid #FF0000;
        }

        .robot-logo {
            width: 80px;
            height: auto;
            margin: 0 auto 10px auto;
            display: block;
        }

        h1, h2 {
            font-size: 1.5em;
            margin: 10px 0;
            color: #FF0000;
        }

        input, button {
            font-family: 'Press Start 2P', cursive;
            padding: 10px;
            margin: 10px 0;
            border: 2px solid #00FF00;
            background-color: #111;
            color: #00FF00;
            outline: none;
        }

        button {
            cursor: pointer;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #00FF00;
            color: #111;
        }

        .separator {
            background-image: url('separator.png');
            background-repeat: repeat-x;
            height: 20px;
            margin: 20px 0;
        }

        #microphoneBtn {
            margin-top: 20px;
            background-color: #FF0000;
            color: #FFF;
        }

        #microphoneBtn.active {
            background-color: #00FF00;
        }
    </style>
</head>
<body>
    <div class="container" id="container">

        <div class="face">
            <img src="lain.png" alt="Personnage Lain">
        </div>

        <h1>IA Noctavia</h1>

        <!-- Calculatrice -->
        <h2>Calculatrice</h2>
        <input type="text" id="calcInput" placeholder="Entrez l'Ã©quation">
        <button onclick="calculer()">Calculer</button>
        <p id="calcResult"></p>

        <div class="separator"></div>

        <!-- Recherche Web -->
        <h2>Recherche Web</h2>
        <input type="text" id="searchInput" placeholder="Entrez votre recherche">
        <button onclick="rechercher()">Rechercher</button>

        <div class="separator"></div>

        <!-- SynthÃ¨se Vocale -->
        <h2>Parle-moi</h2>
        <input type="text" id="speakInput" placeholder="Tapez un message">
        <button onclick="parler()">Parler</button>

        <div class="separator"></div>

        <!-- Commandes vocales -->
        <button id="microphoneBtn" onclick="toggleMicrophone()">Activer/DÃ©sactiver la reconnaissance vocale ðŸŽ¤</button>
    </div>

    <script>
        let microphoneActive = false;

        function calculer() {
            const input = document.getElementById("calcInput").value;
            try {
                const result = eval(input);
                document.getElementById("calcResult").innerText = "RÃ©sultat: " + result;
                parlerTexte("Le rÃ©sultat est " + result);
            } catch (error) {
                document.getElementById("calcResult").innerText = "Erreur de calcul";
                parlerTexte("Erreur de calcul");
            }
        }

        function rechercher() {
            const query = document.getElementById("searchInput").value;
            if (query) {
                window.open("https://www.google.com/search?q=" + encodeURIComponent(query), "_blank");
                parlerTexte("Recherche de " + query);
            }
        }

        function parler() {
            const text = document.getElementById("speakInput").value;
            parlerTexte(text);
        }

        function parlerTexte(texte) {
            const synth = window.speechSynthesis;
            const utterance = new SpeechSynthesisUtterance(texte);
            utterance.lang = "fr-FR";
            synth.speak(utterance);
        }

        function toggleMicrophone() {
            if (microphoneActive) {
                stopRecognition();
            } else {
                startRecognition();
            }
        }

        function startRecognition() {
            const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
            recognition.lang = "fr-FR";
            recognition.start();
            microphoneActive = true;
            document.getElementById("microphoneBtn").classList.add("active");

            recognition.onresult = function(event) {
                const commande = event.results[0][0].transcript.toLowerCase();
                analyserCommande(commande);
            };

            recognition.onerror = function(event) {
                parlerTexte("Erreur lors de la reconnaissance vocale.");
            };
        }

        function stopRecognition() {
            microphoneActive = false;
            document.getElementById("microphoneBtn").classList.remove("active");
        }

        function analyserCommande(commande) {
            // Commandes systÃ¨me
            if (commande.includes("ouvre")) {
                const site = commande.replace("ouvre", "").trim();
                window.open("https://" + site + ".com", "_blank");
                parlerTexte("Ouverture de " + site);
            } else if (commande.includes("ferme l'onglet")) {
                window.close();
                parlerTexte("Fermeture de l'onglet");
            } else if (commande.includes("Ã©teins l'ordinateur")) {
                const confirmation = confirm("Voulez-vous vraiment Ã©teindre l'ordinateur ?");
                if (confirmation) {
                    window.location.href = "shutdown:/";
                }
            } else if (commande.includes("redÃ©marre l'ordinateur")) {
                window.location.href = "restart:/";
            }

            // Commandes multimÃ©dia & son
            else if (commande.includes("joue")) {
                const musique = commande.replace("joue", "").trim();
                window.open("https://www.youtube.com/results?search_query=" + encodeURIComponent(musique), "_blank");
                parlerTexte("Lancement de " + musique);
            } else if (commande.includes("mets en pause") || commande.includes("reprends")) {
                const audio = document.querySelector("audio");
                if (audio.paused) {
                    audio.play();
                    parlerTexte("Musique reprise");
                } else {
                    audio.pause();
                    parlerTexte("Musique mise en pause");
                }
            } else if (commande.includes("monte le son")) {
                const audio = document.querySelector("audio");
                audio.volume = Math.min(1, audio.volume + 0.1);
                parlerTexte("Volume augmentÃ©");
            } else if (commande.includes("baisse le son")) {
                const audio = document.querySelector("audio");
                audio.volume = Math.max(0, audio.volume - 0.1);
                parlerTexte("Volume diminuÃ©");
            } else if (commande.includes("coupe le son") || commande.includes("rÃ©tablis le son")) {
                const audio = document.querySelector("audio");
                audio.muted = !audio.muted;
                parlerTexte(audio.muted ? "Son coupÃ©" : "Son rÃ©tabli");
            }

            // Commandes interaction avancÃ©e
            else if (commande.includes("envoie un message Ã ")) {
                const nom = commande.replace("envoie un message Ã ", "").trim();
                parlerTexte("Message envoyÃ© Ã  " + nom);
            } else if (commande.includes("lis mes notifications")) {
                parlerTexte("Vous avez de nouvelles notifications.");
            } else if (commande.includes("traduis")) {
                const phrase = commande.replace("traduis", "").split("en")[0].trim();
                const langue = commande.split("en")[1].trim();
                fetch(`https://api.mymemory.translated.net/get?q=${phrase}&langpair=fr|${langue}`)
                    .then(response => response.json())
                    .then(data => parlerTexte(data.responseData.translated));
            }

            // Commandes utilitaires
            else if (commande.includes("dÃ©finition de")) {
                const mot = commande.replace("dÃ©finition de", "").trim();
                fetch(`https://api.dictionaryapi.dev/api/v2/entries/fr/${mot}`)
                    .then(response => response.json())
                    .then(data => {
                        const definition = data[0].meanings[0].definitions[0].definition;
                        parlerTexte("DÃ©finition de " + mot + ": " + definition);
                    });
            } else if (commande.includes("convertis")) {
                const [quantite, from, to] = commande.match(/\d+|\w+/g);
                fetch(`https://api.exchangerate-api.com/v4/latest/${from}`)
                    .then(response => response.json())
                    .then(data => {
                        let rate = data.rates[to];
                        let result = quantite * rate;
                        parlerTexte(`Conversion de ${quantite} ${from} en ${to}: ${result}`);
                    });
            } else if (commande.includes("rappelle-moi de")) {
                const [tache, heure] = commande.match(/de (.*?) Ã  (.*)/).slice(1);
                const now = new Date();
                const [hour, minute] = heure.split(":");
                now.setHours(hour, minute);
                setTimeout(() => {
                    parlerTexte(`Rappel : ${tache}`);
                }, now - Date.now());
            }
        }
    </script>
</body>
</html>
